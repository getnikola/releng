<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Nikola Release Checklist</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <style>
ul {
  list-style: none;
  padding-left: 0; }
code { /* using kbd styles instead */
  padding: 2px 4px;
  font-size: 90%;
  color: #fff;
  background-color: #333;
  border-radius: 3px;
  -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, .25);
          box-shadow: inset 0 -1px 0 rgba(0, 0, 0, .25);
}

#counter {
    position: fixed;
    top: 5px;
    right: 5px;
    padding: 5px;
    border: 1px solid #ddd;
    font-size: 2em;
    transition: all 1s;
}

#counter.complete {
    color: green;
    border-color: #bdb;
    background: #dfd;
}
    </style>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
        <div id="counter"><span id="current">0</span>/<span id="total">?</span></div>
<h1>Nikola Release Checklist (v12/2016-04-29)</h1>
<h2>Requirements</h2>
<p>In order to create a release, you need a bit of free time and a GPG setup.</p>
<h2>Housekeeping</h2>
<ul>
<li><input type="checkbox"> If you have a local clone of the releng repo: <code>git pull</code> first, refresh the page if necessary</li>
<li><input type="checkbox"> Get into the Nikola repo, make sure you are on the <code>master</code> branch and run <code>git pull origin master</code></li>
<li><input type="checkbox"> <code>scripts/document_path_handlers.py &gt; docs/path_handlers.txt</code></li>
<li><input type="checkbox"> <code>scripts/jinjify.py</code></li>
<li><input type="checkbox"> <code>scripts/import_po.py</code></li>
<li><input type="checkbox"> <code>scripts/update-bower.sh</code></li>
<li><input type="checkbox"> <code>scripts/generate_symlinked_list.sh</code></li>
<li><input type="checkbox"> <code>scripts/generate_conf.py &gt; ../nikola-site/listings/conf.py</code> (if necessary, change the path to reflect where you store your clone of the Nikola website)</li>
<li><input type="checkbox"> Check if there are any new languages that <strong>have translations</strong> (edit the files for translations marked as not found manually) and add them, using <code>scripts/langstatus.py</code></li>
</ul>
<h2>Preparation</h2>
<ul>
<li><input type="checkbox"> Pick a reasonable version number. Increase the last number (patch) or, if the changes <em>really</em> are significant, increase the second number (minor).</li>
</ul>
<h2>Writing announcements</h2>
<p>All announcements must include the <em>Greeting</em>, <em>What is Nikola?</em>, <em>Downloads</em>, and <em>Changes</em> blocks, in that order. Use the announcements in the Release Engineering repo as a template.</p>
<p>You may also add a <em>Key Changes since last release</em> block after <em>What is Nikola?</em>.</p>
<ul>
<li><input type="checkbox"> Write an announcement for GitHub Releases. It should use Markdown syntax and no word wrap.</li>
<li><input type="checkbox"> Write an announcement for e-mail. It should use reST-esque syntax, with word wrap at 70 columns.</li>
<li><input type="checkbox"> Write an announcement for the Nikola blog. Use <code>nikola new_post -et &quot;Nikola v$VERSION is out&quot;'!' -i path/to/blog.rst --tags 'nikola, planet, python, programming, release'</code> to import the announcement template (which you should then edit). Make sure to set the author name to your real name.</li>
</ul>
<h2>Versioning and tagging</h2>
<p>Run all the commands in your terminal:</p>
<ul>
<li><input type="checkbox"> <code>VERSION=X.Y.Z</code> (without <code>v</code>!)</li>
<li><input type="checkbox"> <code>scripts/set_version.py</code></li>
<li><input type="checkbox"> <code>git add .</code></li>
<li><input type="checkbox"> <code>git commit -S -asm &quot;Version $VERSION&quot;</code></li>
<li><input type="checkbox"> <code>git tag -sm &quot;Version $VERSION&quot; &quot;v$VERSION&quot;</code></li>
<li><input type="checkbox"> <code>git push --follow-tags origin master</code></li>
<li><input type="checkbox"> <code>rm -rf build Nikola.egg-info</code></li>
<li><input type="checkbox"> <code>./setup.py bdist_wheel</code></li>
<li><input type="checkbox"> <code>twine upload -s dist/Nikola-$VERSION-py2.py3-none-any.whl</code></li>
</ul>
<h2>GitHub Releases</h2>
<ul>
<li><input type="checkbox"> Create a GitHub release for this version by running <code>scripts/github-release.py</code></li>
<li><input type="checkbox"> Download the source <code>.tar.gz</code> file generated by GitHub (open link from the release script and click the download button)</li>
<li><input type="checkbox"> Sign the file with <code>gpg -a --detach-sign nikola-$VERSION.tar.gz</code></li>
<li><input type="checkbox"> Upload the tarball and the <code>.asc</code> file to PyPI</li>
</ul>
<h2>GitHub Issues</h2>
<ul>
<li><input type="checkbox"> Create milestone for next release</li>
<li><input type="checkbox"> Move outstanding issues to milestone for next release</li>
<li><input type="checkbox"> Close milestone for this release</li>
</ul>
<h2>Local update</h2>
<ul>
<li><input type="checkbox"> Use <code>pip install -e</code> to reinstall Nikola from Git in your virtualenv (if applicable)</li>
</ul>
<h2>Website update</h2>
<ul>
<li><input type="checkbox"> Copy all documentation, <code>AUTHORS.txt</code> and <code>CHANGES.txt</code> from your Nikola copy to <code>stories/</code></li>
<li><input type="checkbox"> Modify the version numbers in <code>stories/conf.txt</code> (it’s used TWICE!)</li>
<li><input type="checkbox"> Optionally regenerate the <code>cerulean</code> theme: <code>nikola bootswatch_theme -s cerulean -n cerulean</code></li>
<li><input type="checkbox"> Build and deploy the site</li>
<li><input type="checkbox"> Commit and push your changes to GitHub</li>
</ul>
<h2>E-mails</h2>
<ul>
<li><input type="checkbox"> Send the e-mail announcement to <a href="mailto:nikola-discuss@googlegroups.com">nikola-discuss@googlegroups.com</a> and <a href="mailto:python-announce-list@python.org">python-announce-list@python.org</a>. You should sign it with GPG if possible.</li>
<li><input type="checkbox"> (OPTIONAL) Report a bug to Debian, notifying them of the update.  (<a href="mailto:submit@bugs.debian.org">submit@bugs.debian.org</a> + Package/Version/Severity “header” lines at top of message)</li>
</ul>
<h2>Finishing up</h2>
<ul>
<li><input type="checkbox"> Give yourself a pat on the back!</li>
<li><input type="checkbox"> If you have access to the AUR packages, update them (if not, wait for Chris to handle this)</li>
</ul>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script>
    // Completed task counter
    // by Chris Warrick -- JS code in public domain
    var max = 0;
    var inp;
    $(document).ready(function() {
        inp = $('input');
        max = inp.length;
        $('#total').text(max);
    });
    $('input').click(function() {
        inp = $('input');
        var count = 0;
        for (var i = 0; i < inp.length; i++) {
            if (inp[i].checked) {
                count += 1;
            }
        }
        $('#current').text(count);
        if (count == max) {
            $('#counter').addClass('complete');
        } else {
            $('#counter').removeClass('complete');
        }
    });
    </script>
  </body>
</html>
