<h1>Nikola Release Checklist</h1>
<h2>Requirements</h2>
<p>In order to create a release, you need a bit of free time and a GPG setup. You could technically do without them (<code>git tag -am</code> + <code>twine upload</code> without <code>-s</code>), but it’s nicer if we have some confirmation it’s really you.</p>
<h2>Housekeeping</h2>
<ul>
<li><input type="checkbox"> Make sure you are on the <code>master</code> branch and run <code>git pull origin master</code></li>
<li><input type="checkbox"> <code>scripts/jinjify.py</code></li>
<li><input type="checkbox"> <code>scripts/import_po.py</code></li>
<li><input type="checkbox"> <code>scripts/update-bower.sh</code></li>
<li><input type="checkbox"> <code>scripts/generate_symlinked_list.sh</code></li>
<li><input type="checkbox"> <code>scripts/generate_conf.py &gt; ../nikola-site/listings/conf.py</code> (if necessary, change the path to reflect where you store your clone of the Nikola website)</li>
</ul>
<h2>Preparation</h2>
<ul>
<li><input type="checkbox"> Pick a reasonable version number. Increase the last number (patch) or, if the changes <em>really</em> are significant, increase the second number (minor).</li>
</ul>
<h2>Writing announcements</h2>
<p>All announcements must include the <em>Greeting</em>, <em>What is Nikola?</em>, <em>Downloads</em>, and <em>Changes</em> blocks, in that order. Use the announcements in the Release Engineering repo as a template.</p>
<p>You may also add a <em>Key Changes since last release</em> block after <em>What is Nikola?</em>.</p>
<ul>
<li><input type="checkbox"> Write an announcement for GitHub Releases. It should use Markdown syntax and no word wrap.</li>
<li><input type="checkbox"> Write an announcement for e-mail. It should use reST-esque syntax, with word wrap at 70 columns.</li>
<li><input type="checkbox"> Write an announcement for the Nikola blog. Use <code>nikola new_post -t &quot;Nikola v$VERSION is out!&quot; -i path/to/blog.rst</code> to import the announcement template (which you should then edit). Make sure to set the tags to <code>nikola, planet, python, programming, release</code>, and to set the author name to your real name.</li>
</ul>
<h2>Versioning and tagging</h2>
<p>Run all the commands in your terminal:</p>
<ul>
<li><input type="checkbox"> <code>VERSION=X.Y.Z</code> (without <code>v</code>!)</li>
<li><input type="checkbox"> <code>scripts/set_version.py</code></li>
<li><input type="checkbox"> <code>git add .</code></li>
<li><input type="checkbox"> <code>git commit -asm &quot;Version $VERSION&quot;</code></li>
<li><input type="checkbox"> <code>git tag -sm &quot;Version $VERSION&quot; &quot;v$VERSION&quot;</code></li>
<li><input type="checkbox"> <code>git push --follow-tags origin master</code></li>
<li><input type="checkbox"> <code>./setup.py bdist_wheel</code></li>
<li><input type="checkbox"> <code>twine upload -s dist/Nikola-$VERSION-py2.py3-none-any.whl</code></li>
</ul>
<h2>GitHub Releases</h2>
<ul>
<li><input type="checkbox"> Create a GitHub release for this version, use the announcement you wrote earlier</li>
<li><input type="checkbox"> Download the source <code>.tar.gz</code> file generated by GitHub</li>
<li><input type="checkbox"> Sign the file with <code>gpg -a --detach-sign nikola-$VERSION.tar.gz</code></li>
<li><input type="checkbox"> Upload the tarball and the <code>.asc</code> file to PyPI</li>
</ul>
<h2>GitHub Issues</h2>
<ul>
<li><input type="checkbox"> Create milestone for next release</li>
<li><input type="checkbox"> Move outstanding issues to milestone for next release</li>
<li><input type="checkbox"> Close milestone for this release</li>
</ul>
<h2>Local update</h2>
<ul>
<li><input type="checkbox"> Use <code>pip install -e</code> to reinstall Nikola from Git in your virtualenv (if applicable)</li>
</ul>
<h2>Website update</h2>
<ul>
<li><input type="checkbox"> Copy all documentation and <code>CHANGES.txt</code> from your Nikola copy to <code>stories/</code></li>
<li><input type="checkbox"> Modify the version numbers in <code>stories/welcome.txt</code> and <code>stories/conf.txt</code></li>
<li><input type="checkbox"> Optionally regenerate the <code>cerulean</code> theme: <code>nikola bootswatch_theme -s cerulean -n cerulean</code></li>
<li><input type="checkbox"> Build and deploy the site</li>
<li><input type="checkbox"> Commit your changes to GitHub</li>
</ul>
<h2>E-mails</h2>
<ul>
<li><input type="checkbox"> Send the e-mail announcement to <a href="mailto:nikola-discuss@googlegroups.com">nikola-discuss@googlegroups.com</a> and <a href="mailto:python-announce-list@python.org">python-announce-list@python.org</a>. You should sign it with GPG if possible.</li>
</ul>
<h2>Finishing up</h2>
<ul>
<li><input type="checkbox"> Give yourself a pat on the back!</li>
<li><input type="checkbox"> If you have access to the AUR packages, update them (if not, wait for Chris to handle this)</li>
</ul>
